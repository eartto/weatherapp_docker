{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport weatherHistoryService from '../services/weatherHistoryService';\nconst initialState = [];\nexport const weatherHistorySlice = createSlice({\n  name: 'weatherHistory',\n  initialState,\n  reducers: {\n    setHistory: (state, action) => {\n      const history = action.payload;\n      state = history;\n      return state;\n    },\n    addHistory: (state, action) => {\n      const city = action.payload;\n      state.unshift(city);\n      return state;\n    },\n    removeHistory: state => {\n      state.pop();\n    }\n  }\n});\nexport const fetchWeatherHistory = () => {\n  return async dispatch => {\n    const weatherHistory = await weatherHistoryService.getAll();\n    dispatch(setHistory(weatherHistory));\n  };\n};\nexport const addWeatherHistory = city => {\n  return async () => {\n    const newCity = city;\n    const cities = await weatherHistoryService.getAll();\n    console.log(newCity);\n    console.log(cities[3].city);\n    const found = cities.find(c => c.city === newCity);\n    console.log('found: ');\n    console.log(found);\n    if (cities.some(c => c.city !== newCity)) {\n      console.log('hey');\n    }\n  };\n};\nexport const {\n  setHistory,\n  addHistory,\n  removeHistory\n} = weatherHistorySlice.actions;\nconst weatherHistoryReducer = weatherHistorySlice.reducer;\nexport default weatherHistoryReducer;","map":{"version":3,"names":["createSlice","weatherHistoryService","initialState","weatherHistorySlice","name","reducers","setHistory","state","action","history","payload","addHistory","city","unshift","removeHistory","pop","fetchWeatherHistory","dispatch","weatherHistory","getAll","addWeatherHistory","newCity","cities","console","log","found","find","c","some","actions","weatherHistoryReducer","reducer"],"sources":["/home/eartto/weatherapp/weatherapp_frontend/src/reducers/weatherHistoryReducer.ts"],"sourcesContent":["import { createSlice, Dispatch } from '@reduxjs/toolkit'\nimport weatherHistoryService from '../services/weatherHistoryService'\nimport { weatherHistory } from '../@types/weatherHistory'\n\nconst initialState = [] as weatherHistory[]\n\nexport const weatherHistorySlice = createSlice({\n    name: 'weatherHistory',\n    initialState,\n    reducers: {\n        setHistory: (state, action) => {\n            const history = action.payload\n            state = history\n            return state\n        },\n        addHistory: (state, action) => {\n            const city = action.payload\n            state.unshift(city)\n            return state\n        },\n        removeHistory: (state) => {\n            state.pop()\n        }\n    }\n})\n\nexport const fetchWeatherHistory = () => {\n    return async (dispatch: Dispatch) => {\n        const weatherHistory = await weatherHistoryService.getAll();\n        dispatch(setHistory(weatherHistory))\n    }\n}\n\nexport const addWeatherHistory = (city: string) => {\n    return async () => {\n        const newCity = city\n        const cities = await weatherHistoryService.getAll() as weatherHistory[]\n        console.log(newCity)\n        console.log(cities[3].city)\n        const found = cities.find(c => c.city === newCity)\n        console.log('found: ')\n        console.log(found)\n        if (cities.some(c => c.city !== newCity)) {\n            console.log('hey')\n        }\n    }\n}\n\nexport const { setHistory, addHistory, removeHistory } = weatherHistorySlice.actions\n\nconst weatherHistoryReducer = weatherHistorySlice.reducer\n\nexport default weatherHistoryReducer"],"mappings":"AAAA,SAASA,WAAW,QAAkB,kBAAkB;AACxD,OAAOC,qBAAqB,MAAM,mCAAmC;AAGrE,MAAMC,YAAY,GAAG,EAAsB;AAE3C,OAAO,MAAMC,mBAAmB,GAAGH,WAAW,CAAC;EAC3CI,IAAI,EAAE,gBAAgB;EACtBF,YAAY;EACZG,QAAQ,EAAE;IACNC,UAAU,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MAC3B,MAAMC,OAAO,GAAGD,MAAM,CAACE,OAAO;MAC9BH,KAAK,GAAGE,OAAO;MACf,OAAOF,KAAK;IAChB,CAAC;IACDI,UAAU,EAAEA,CAACJ,KAAK,EAAEC,MAAM,KAAK;MAC3B,MAAMI,IAAI,GAAGJ,MAAM,CAACE,OAAO;MAC3BH,KAAK,CAACM,OAAO,CAACD,IAAI,CAAC;MACnB,OAAOL,KAAK;IAChB,CAAC;IACDO,aAAa,EAAGP,KAAK,IAAK;MACtBA,KAAK,CAACQ,GAAG,CAAC,CAAC;IACf;EACJ;AACJ,CAAC,CAAC;AAEF,OAAO,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;EACrC,OAAO,MAAOC,QAAkB,IAAK;IACjC,MAAMC,cAAc,GAAG,MAAMjB,qBAAqB,CAACkB,MAAM,CAAC,CAAC;IAC3DF,QAAQ,CAACX,UAAU,CAACY,cAAc,CAAC,CAAC;EACxC,CAAC;AACL,CAAC;AAED,OAAO,MAAME,iBAAiB,GAAIR,IAAY,IAAK;EAC/C,OAAO,YAAY;IACf,MAAMS,OAAO,GAAGT,IAAI;IACpB,MAAMU,MAAM,GAAG,MAAMrB,qBAAqB,CAACkB,MAAM,CAAC,CAAqB;IACvEI,OAAO,CAACC,GAAG,CAACH,OAAO,CAAC;IACpBE,OAAO,CAACC,GAAG,CAACF,MAAM,CAAC,CAAC,CAAC,CAACV,IAAI,CAAC;IAC3B,MAAMa,KAAK,GAAGH,MAAM,CAACI,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACf,IAAI,KAAKS,OAAO,CAAC;IAClDE,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;IACtBD,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;IAClB,IAAIH,MAAM,CAACM,IAAI,CAACD,CAAC,IAAIA,CAAC,CAACf,IAAI,KAAKS,OAAO,CAAC,EAAE;MACtCE,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;IACtB;EACJ,CAAC;AACL,CAAC;AAED,OAAO,MAAM;EAAElB,UAAU;EAAEK,UAAU;EAAEG;AAAc,CAAC,GAAGX,mBAAmB,CAAC0B,OAAO;AAEpF,MAAMC,qBAAqB,GAAG3B,mBAAmB,CAAC4B,OAAO;AAEzD,eAAeD,qBAAqB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}